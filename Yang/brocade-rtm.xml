<?xml version="1.0" encoding="UTF-8"?>
<module name="brocade-rtm"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:rtm="urn:brocade.com:mgmt:brocade-rtm"
        xmlns:rbridge="urn:brocade.com:mgmt:brocade-rbridge"
        xmlns:common-def="urn:brocade.com:mgmt:brocade-common-def"
        xmlns:vcs="urn:brocade.com:mgmt:brocade-vcs"
        xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types"
        xmlns:vrf="urn:brocade.com:mgmt:brocade-vrf">
  <namespace uri="urn:brocade.com:mgmt:brocade-rtm"/>
  <prefix value="rtm"/>
  <import module="brocade-rbridge">
    <prefix value="rbridge"/>
  </import>
  <import module="brocade-common-def">
    <prefix value="common-def"/>
  </import>
  <import module="brocade-vcs">
    <prefix value="vcs"/>
  </import>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <import module="brocade-vrf">
    <prefix value="vrf"/>
  </import>
  <organization>
    <text>Brocade Communications Systems, Inc.</text>
  </organization>
  <contact>
    <text>Brocade Communications Systems, Inc.
Postal: 130 Holger Way
        San Jose, CA 95134
         U.S.A
Tel: +1-408-333-8000
E-mail: support@Brocade.com 
web: www.brocade.com.</text>
  </contact>
  <description>
    <text>This management module is for IP Routes.</text>
  </description>
  <revision date="2011-09-28">
    <description>
      <text>Initial version of this management module.</text>
    </description>
  </revision>
  <typedef name="nexthop-id-type">
    <description>
      <text>Nexthop entry ID</text>
    </description>
    <type name="uint32"/>
  </typedef>
  <grouping name="route-attrib">
    <container name="route-attributes">
      <leaf name="metric">
        <type name="uint32">
          <range value="1..16">
            <error-message>
              <value>% Error: Value out of range at '^' marker</value>
            </error-message>
          </range>
        </type>
      </leaf>
      <leaf name="distance">
        <type name="uint32">
          <range value="1..254">
            <error-message>
              <value>% Error: Value out of range at '^' marker</value>
            </error-message>
          </range>
        </type>
      </leaf>
      <leaf name="tag">
        <type name="uint32"/>
        <description>
          <text>Tag can be configured to filter the static routes
for route redistribution.
Default value is 0, indicating no tag.</text>
        </description>
      </leaf>
    </container>
  </grouping>
  <grouping name="rtm-cmds">
    <container name="rtm-config">
      <leaf name="router-id">
        <type name="inet:ipv4-address"/>
      </leaf>
      <leaf name="load-sharing">
        <type name="uint32">
          <range value="1..8">
            <error-message>
              <value>% Error: Value out of range at '^' marker</value>
            </error-message>
          </range>
        </type>
      </leaf>
      <uses name="rtm-route-config"/>
    </container>
  </grouping>
  <grouping name="rtm-route-config">
    <container name="route">
      <leaf name="next-hop-enable-default">
        <type name="empty"/>
      </leaf>
      <leaf name="next-hop-recursion">
        <type name="uint32">
          <range value="0..10">
            <error-message>
              <value>% Error: Value out of range at '^' marker</value>
            </error-message>
          </range>
        </type>
        <default value="3"/>
      </leaf>
      <list name="next-hop">
        <key value="proto"/>
        <leaf name="proto">
          <type name="enumeration">
            <enum name="ospf">
              <value value="1"/>
            </enum>
            <enum name="bgp">
              <value value="2"/>
            </enum>
          </type>
        </leaf>
      </list>
      <list name="static-route-nh">
        <key value="static-route-dest static-route-next-hop"/>
        <leaf name="static-route-dest">
          <type name="inet:ipv4-prefix"/>
        </leaf>
        <leaf name="static-route-next-hop">
          <type name="inet:ipv4-address"/>
        </leaf>
        <uses name="route-attrib"/>
      </list>
      <list name="static-route-nh-vrf">
        <key value="static-route-next-vrf-dest next-hop-vrf static-route-next-hop"/>
        <leaf name="static-route-next-vrf-dest">
          <type name="inet:ipv4-prefix"/>
        </leaf>
        <leaf name="next-hop-vrf">
          <type name="string"/>
        </leaf>
        <leaf name="static-route-next-hop">
          <type name="inet:ipv4-address"/>
        </leaf>
      </list>
      <list name="static-route-oif">
        <key value="static-route-dest 
static-route-oif-type static-route-oif-name"/>
        <leaf name="static-route-dest">
          <type name="inet:ipv4-prefix"/>
        </leaf>
        <leaf name="static-route-oif-type">
          <type name="enumeration">
            <enum name="tengigabitethernet">
              <value value="1"/>
            </enum>
            <enum name="gigabitethernet">
              <value value="2"/>
            </enum>
            <enum name="port-channel">
              <value value="3"/>
            </enum>
            <enum name="ve">
              <value value="4"/>
            </enum>
            <enum name="null">
              <value value="5"/>
            </enum>
            <enum name="fortygigabitethernet">
              <value value="6"/>
            </enum>
          </type>
        </leaf>
        <leaf name="static-route-oif-name">
          <type name="string">
            <length value="1..16"/>
          </type>
        </leaf>
        <uses name="route-attrib"/>
      </list>
    </container>
  </grouping>
  <augment target-node="/rbridge:rbridge-id/rbridge:ip">
    <when condition='/vcs:vcsmode/vcs:vcs-mode = "true"'/>
    <uses name="rtm-cmds"/>
  </augment>
  <augment target-node="/common-def:ip">
    <when condition='/vcs:vcsmode/vcs:vcs-mode = "false"'/>
    <uses name="rtm-cmds"/>
  </augment>
  <augment target-node="/rbridge:rbridge-id/vrf:vrf/vrf:address-family/vrf:ipv4">
    <container name="ip">
      <description>
        <text>rtm commands</text>
      </description>
      <uses name="rtm-route-config"/>
    </container>
  </augment>
</module>
